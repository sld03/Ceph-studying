# CephRBD

Ceph osd tree:

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image.png)

# Test IOping và ping giữa các node

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%201.png)

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%202.png)

# Block 4k

Random read 4k

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%203.png)

Thêm 1 OSD xong nó giảm ??

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%204.png)

Random Write 4k

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%205.png)

Write với fsync thì iops với latency cũng ko thay đổi

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%206.png)

Random Read-Write 4k

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%207.png)

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%208.png)

Sequential Read

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%209.png)

Sequential write

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2010.png)

# Block 32k

Rand read

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2011.png)

Rand write

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2012.png)

Randrw

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2013.png)

read

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2014.png)

write

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2015.png)

# Block 128k

Rand read

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2016.png)

Rand Write

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2017.png)

Rand r-w

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2018.png)

Sequential read

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2019.png)

Sequential write

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2020.png)

# Block 1M

Random Read

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2021.png)

Randwrite

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2022.png)

Rand rw

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2023.png)

Seq Read

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2024.png)

Seq write

![image.png](CephRBD%201a5191b712478075b201c76226e40856/image%2025.png)

fio --filename=/dev/nvme8n2 --direct=1 -rw=randwrite --bs=1024k --ioengine=libaio --iodepth=256 --runtime=60 --numjobs=4 --time_based --group_reporting --name=iops-test-job --eta-newline=1

fio --filename=/dev/nvme2n1 --direct=1 -rw=randwrite --bs=1024k --ioengine=libaio --iodepth=256 —runtime=60 --numjobs=4 --time_based --group_reporting --name=iops-test-job --eta-newline=1

fio --filename=/dev/nvme2n1 --direct=1 -rw=randread --bs=1024k --ioengine=libaio --iodepth=256 --runtime=60 --numjobs=4 --time_based --group_reporting --name=iops-test-job --eta-newline=1